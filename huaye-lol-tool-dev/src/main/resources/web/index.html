<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>LOL设置</title>
    <link rel="stylesheet" href="static/bootstrap.min.css">
    <link rel="stylesheet" href="static/element-ui.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .settings, .tables {
            margin-bottom: 20px;
        }
        th {
            background-color: #f4f4f4;
        }
        .form-inline .form-group {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }
        .form-group label {
            margin-right: 10px;
        }
        .form-control {
            width: auto;
        }
    </style>
</head>
<body>
<div id="app" class="container">
    <!-- 设置区 -->
    <p class="my-4">赛前设置</p>
    <el-form inline>
        <el-form-item label="自动接受对局">
            <el-switch v-model="autoAccept"></el-switch>
        </el-form-item>
        <el-form-item label="自动禁用英雄">
            <el-switch v-model="autoBan"></el-switch>
            <el-select v-model="selectedBanHero" placeholder="选择英雄" :disabled="!autoBan">
                <el-option v-for="hero in banHeroes" :key="hero" :label="hero" :value="hero"></el-option>
            </el-select>
        </el-form-item>
        <el-form-item label="自动选择英雄">
            <el-switch v-model="autoSelect"></el-switch>
            <el-select v-model="selectedSelectHero" placeholder="选择英雄" :disabled="!autoSelect">
                <el-option v-for="hero in selectHeroes" :key="hero" :label="hero" :value="hero"></el-option>
            </el-select>
        </el-form-item>
    </el-form>

    <!-- 查询按钮 -->
    <el-button type="primary" @click="handleQueryScores">查询队友信息</el-button>

    <!-- 友方队伍展示 -->
    <p class="my-4">友方队伍</p>
    <el-table :data="allyData" border>
        <el-table-column prop="houseName" label="马匹信息"></el-table-column>
        <el-table-column prop="summonerName" label="召唤师名称"></el-table-column>
        <el-table-column prop="score" label="评分"></el-table-column>
        <el-table-column prop="gameDetail" label="战绩"></el-table-column>
    </el-table>

    <!-- 敌方队伍展示 -->
    <el-button type="primary" @click="handleQueryScores">查询敌方队友信息</el-button>
    <p class="my-4">敌方队伍</p>
    <el-table :data="enemyData" border>
        <el-table-column prop="houseName" label="马匹信息"></el-table-column>
        <el-table-column prop="summonerName" label="召唤师名称"></el-table-column>
        <el-table-column prop="score" label="评分"></el-table-column>
        <el-table-column prop="gameDetail" label="战绩"></el-table-column>
    </el-table>
</div>

<!-- 引入Vue.js、axios以及Element UI-->
<script src="static/vue@2.js"></script>
<script src="static/axios.min.js"></script>
<script src="static/element-ui.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            autoAccept: false,
            autoBan: false,
            autoSelect: false,
            selectedBanHero: "",
            selectedSelectHero: "",
            banHeroes: ["英雄1", "英雄2"],
            selectHeroes: ["英雄3", "英雄4"],
            // 初始化数据为空，由接口返回时更新
            allyData: [],
            enemyData: []
        },
        methods: {
            // 查询友方队伍评分数据
            handleQueryScores() {
                axios.get('http://localhost:9361/api/scores')
                    .then(response => {
                        // 假定返回的数据格式：{ selfTeamScore: [...], enemyTeamScore: [...] }
                        this.allyData = response.data.selfTeamScore;
                        this.enemyData = response.data.enemyTeamScore;
                        this.$message({
                            message: '成功获取队伍信息！',
                            type: 'success'
                        });
                    })
                    .catch(error => {
                        console.error("请求错误:", error);
                        this.$message.error('获取队伍信息失败！');
                    });
            },
        },
        watch: {
            selectedBanHero(val) {
                if (val) {
                    this.$message({
                        message: '选择禁用英雄：' + val,
                        type: 'success'
                    });
                    // 此处发送禁用英雄的请求
                    // axios.post('/api/ban', { hero: val })
                    //   .then(response => { console.log("禁用响应", response.data) })
                    //   .catch(error => { console.error("请求错误:", error) });
                }
            },
            selectedSelectHero(val) {
                if (val) {
                    this.$message({
                        message: '选择自动选英雄：' + val,
                        type: 'success'
                    });
                    // 此处发送自动选择英雄的请求
                    // axios.post('/api/select', { hero: val })
                    //   .then(response => { console.log("选择响应", response.data) })
                    //   .catch(error => { console.error("请求错误:", error) });
                }
            }
        }
    });
</script>
</body>
</html>
